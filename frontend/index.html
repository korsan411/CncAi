<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>CncAi - Preview</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>CncAi</h1>
    <div class="buttons">
      <button onclick="showTab('original')">الصورة الأصلية</button>
      <button onclick="showTab('preview2d')">معاينة 2D</button>
      <button onclick="showTab('heatmap')">Heatmap</button>
      <button onclick="showTab('preview3d')">معاينة 3D</button>
      <button onclick="showTab('gcode')">G-code</button>
      <button onclick="toggleTheme()">تبديل الثيم</button>
    </div>
  </header>

  <main>
    <!-- Original -->
    <div id="originalTab" class="tab">
      <h2>الصورة الأصلية</h2>
      <input type="file" id="imageUpload" accept="image/*">
      <canvas id="originalCanvas"></canvas>
    </div>

    <!-- 2D Preview -->
    <div id="preview2dTab" class="tab" style="display:none;">
      <h2>معاينة 2D</h2>
      <canvas id="preview2dCanvas"></canvas>
    </div>

    <!-- Heatmap -->
    <div id="heatmapTab" class="tab" style="display:none;">
      <h2>Heatmap</h2>
      <div class="colormap-buttons">
        <button onclick="setColormap('jet')">Jet</button>
        <button onclick="setColormap('hot')">Hot</button>
        <button onclick="setColormap('cool')">Cool</button>
        <button onclick="setColormap('gray')">Gray</button>
      </div>
      <canvas id="heatmapCanvas"></canvas>
    </div>

    <!-- 3D Preview -->
    <div id="preview3dTab" class="tab" style="display:none;">
      <h2>معاينة 3D</h2>
      <div id="preview3d"></div>
    </div>

    <!-- G-code -->
    <div id="gcodeTab" class="tab" style="display:none;">
      <h2>G-code Editor</h2>
      <textarea id="gcodeEditor" rows="12" style="width:100%;"></textarea>
      <div class="gcode-controls">
        <button onclick="runGcode()">تشغيل G-code</button>
        <button onclick="downloadGcode()">تحميل G-code</button>
      </div>
      <div id="gcodePreview" style="height:400px; background:#111; color:#0f0; padding:10px; overflow:auto;"></div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/controls/OrbitControls.js"></script>
  <script src="script.js"></script>
</body>
</html>
